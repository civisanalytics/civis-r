<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>R Client for the Civis Platform API • civis</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">civis</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="/index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/concurrency.html">Making Simultaneous Calls to Platform</a>
    </li>
    <li>
      <a href="articles/data_import_and_export.html">Data Import and Export</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/civisanalytics/civis-r">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
    <div id="civis-api-client" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#civis-api-client" class="anchor"></a>Civis API Client</h1></div>

<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p><code>civis</code> is an R package that helps analysts and developers interact with the Civis Platform. The package includes a set of tools around common workflows as well as a convenient interface to make requests directly to the Civis API.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Installing and using <code>civis</code> requires a Civis API key. Instructions for creating an API key can be found <a href="https://civis.zendesk.com/hc/en-us/articles/216341583-Generating-an-API-Key">here</a>. All API keys have a set expiration date and so a new key will need to be created at least every 30 days.</p>
<p>Once you have created an API key, you will then need to add it to your environment so <code>civis</code> can access it. To do this, add the following line to your <code>.Renviron</code> file:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="va">CIVIS_API_KEY=</span>adlfk942l2ka0dd0232</code></pre></div>
<p>Be sure to replace the fake key <code>adlfk942l2ka0dd0232</code> with your newly created key.</p>
<p>With an API key in place, you can now install <code>civis</code> using devtools:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">git</span> clone git@github.com:civisanalytics/civis-r.git
<span class="ex">Rscript</span> -e <span class="st">"devtools::install('civis-r', build_vignettes = TRUE);"</span></code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p><code>civis</code> includes functionality for both</p>
<ol>
<li>Making direct calls to the Platform API</li>
<li>Making single calls to accomplish a specific task (which may involve making multiple calls to the Platform API)</li>
</ol>
<p>Functions which make direct calls to the Platform API are prefixed with the name of the resource that the function accesses. For example, the <code>users</code> resource encapsulates all the functionality of Platform regarding users. We can make various calls to the <code>users</code> resource to get information about ourselves and our team.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Data about me</span>
me &lt;-<span class="st"> </span>civis<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/civis/topics/users_list_me">users_list_me</a></span>()
my_id &lt;-<span class="st"> </span>me<span class="op">$</span>id

<span class="co"># Data about my team</span>
my_team &lt;-<span class="st"> </span>civis<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/civis/topics/users_list">users_list</a></span>()
team_members &lt;-<span class="st"> </span><span class="kw">sapply</span>(my_team, <span class="cf">function</span>(x) x<span class="op">$</span>name)</code></pre></div>
<p>Many useful tasks will require making multiple direct calls to Platform. In order to make this easier, <code>civis</code> includes a number of wrapper functions to make common tasks easier. For example, reading data from a table in Platform is as easy as</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(civis)

<span class="co"># Read an entire table in to memory</span>
my_table &lt;-<span class="st"> "schema.tablename"</span>
df &lt;-<span class="st"> </span><span class="kw"><a href="reference/read_civis.html">read_civis</a></span>(my_table, <span class="dt">database=</span><span class="st">"my_database"</span>)

<span class="co"># Run a query and read the results into memory</span>
query &lt;-<span class="st"> </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/sql.html">sql</a></span>(<span class="st">"SELECT a, b, c FROM schema.tablename WHERE b &gt; 42"</span>)
df2 &lt;-<span class="st"> </span><span class="kw"><a href="reference/read_civis.html">read_civis</a></span>(query, <span class="dt">database=</span><span class="st">"my_database"</span>)</code></pre></div>
<p><code>civis</code> includes many more functions for tasks like writing data to tables and files as well as for creating reports. For more detailed documentation, see the included vignettes:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">browseVignettes</span>(<span class="st">'civis'</span>)</code></pre></div>
</div>
<div id="updating" class="section level2">
<h2 class="hasAnchor">
<a href="#updating" class="anchor"></a>Updating</h2>
<p>The <code>civis</code> package automatically generates R functions and documentation to interact with the Civis Platform when the package installs. Periodically, the Civis Platform API is updated with new functionality. New functions can be generated to access these features automatically by reinstalling the <code>civis</code> package from CRAN.</p>
</div>
<div id="api-documentation" class="section level2">
<h2 class="hasAnchor">
<a href="#api-documentation" class="anchor"></a>API Documentation</h2>
<p><a href="https://console.civisanalytics.com/support#/api" class="uri">https://console.civisanalytics.com/support#/api</a></p>
</div>
<div id="contributing" class="section level2">
<h2 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h2>
<p>Contributions to the code are very welcome! Issues and bug reports can filed through the standard Github issue interface. In order to submit a pull request, please fork the repo and make a pull request from the fork to the master branch of the main repo. Unit tests must pass before merging and writing tests for new code is highly encouraged! Unit tests can be run with <code>Rscript tests/testthat.R</code>. For major, potentially breaking changes, integration tests should be run with</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="bu">cd</span> tools/integration_tests
<span class="ex">Rscript</span> smoke_test.R</code></pre></div>
<p>Note, integration tests require a valid Civis API key to run, and my be slow.</p>
<p>All contributors of code should include themselves in <code>DESCRIPTION</code> by adding the following object in the <code>Authors@R</code> section:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">person</span>(<span class="st">"FirstName"</span>, <span class="st">"LastName"</span>, <span class="dt">email =</span> <span class="st">"email@email.com"</span>, <span class="dt">role =</span> <span class="st">"ctb"</span>)</code></pre></div>
<p>This project is intended to be a safe, welcoming space for collaboration, and contributors are expected to adhere to the <a href="http://contributor-covenant.org">Contributor Covenant</a> code of conduct.</p>
</div>
</div>
  </div>

  <div class="col-md-3" id="sidebar">
    <h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/civisanalytics/civis-r">https://​github.com/​civisanalytics/​civis-r</a>
</li>
<li>Report a bug at <br><a href="https://github.com/civisanalytics/civis-r/issues">https://​github.com/​civisanalytics/​civis-r/​issues</a>
</li>
</ul>
<h2>License</h2>
<p><a href="https://opensource.org/licenses/BSD-3-Clause">BSD_3_clause</a> + file <a href="LICENSE.html">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Bill Lattner <br><small class="roles"> Maintainer, author </small> </li>
<li>Patrick Miller <br><small class="roles"> Author </small> </li>
<li>Keith Ingersoll <br><small class="roles"> Author </small> </li>
<li>Anh Le <br><small class="roles"> Author </small> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.com/civisanalytics/civis-r-client"><img src="https://travis-ci.com/civisanalytics/civis-r-client.svg?token=E2j26hcJpSqCtyNqWd2B&amp;branch=open-source" alt="Build Status"></a></li>
</ul>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Bill Lattner, Patrick Miller, Keith Ingersoll, Anh Le.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
